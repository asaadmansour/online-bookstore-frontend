import{a as H}from"./chunk-WI4WJIFX.js";import{b as z}from"./chunk-DZG2A23L.js";import{a as L,b as f,c as F,d as G,f as I,g as j,h as D,m as A,o as B}from"./chunk-SPKWXH6Y.js";import"./chunk-HOACR73J.js";import{$ as e,I as l,Ja as M,L as C,M as y,U as c,V as u,X as E,Y as V,Z as k,_ as h,aa as t,ba as m,fa as w,ha as S,ja as p,la as N,ma as o,na as g,oa as P,w as _,x as b,xa as T,y as s,z as x}from"./chunk-VPDMBE7M.js";var q=()=>[1,2,3,4];function O(i,a){i&1&&(e(0,"div",7),m(1,"div",8)(2,"div",9),t())}function R(i,a){i&1&&(e(0,"div",0)(1,"div"),m(2,"div",5),e(3,"div",6),V(4,O,3,0,"div",7,E),t()()()),i&2&&(l(4),k(T(0,q)))}function Y(i,a){if(i&1&&(e(0,"div",1),s(),e(1,"svg",10),m(2,"path",11),t(),x(),e(3,"div")(4,"p",12),o(5,"Error"),t(),e(6,"p",13),o(7),t()()()),i&2){let n=p();l(7),g(n.error)}}function Z(i,a){if(i&1&&(e(0,"div",2),s(),e(1,"svg",10),m(2,"path",14),t(),x(),e(3,"div")(4,"p",12),o(5,"Success"),t(),e(6,"p",13),o(7),t()()()),i&2){let n=p();l(7),g(n.success)}}function $(i,a){i&1&&(e(0,"span",24),s(),e(1,"svg",34),m(2,"path",35),t(),o(3," Verified "),t())}function J(i,a){i&1&&(e(0,"span",25),s(),e(1,"svg",34),m(2,"path",36),t(),o(3," Pending "),t())}function K(i,a){if(i&1){let n=w();e(0,"div",3)(1,"div")(2,"div",15)(3,"div")(4,"h2",16),s(),e(5,"svg",17),m(6,"path",18),t(),o(7," Personal Information "),t(),x(),e(8,"p",19),o(9,"Your profile details and personal data"),t()()(),e(10,"div",6)(11,"div",20)(12,"p",21),o(13,"First Name"),t(),e(14,"p",22),o(15),t()(),e(16,"div",20)(17,"p",21),o(18,"Last Name"),t(),e(19,"p",22),o(20),t()(),e(21,"div",20)(22,"p",21),o(23,"Email Address"),t(),e(24,"div",23)(25,"p",22),o(26),t(),c(27,$,4,0,"span",24)(28,J,4,0,"span",25),t()(),e(29,"div",20)(30,"p",21),o(31,"Date of Birth"),t(),e(32,"p",22),o(33),t()()()(),e(34,"div")(35,"div",26)(36,"h2",16),s(),e(37,"svg",27),m(38,"path",28),t(),o(39," Account Information "),t()(),x(),e(40,"div",6)(41,"div",20)(42,"p",21),o(43,"Account Role"),t(),e(44,"span",29),o(45),t()(),e(46,"div",20)(47,"p",21),o(48,"Member Since"),t(),e(49,"p",22),o(50),t()()()(),e(51,"div",30)(52,"button",31),S("click",function(){_(n);let d=p();return b(d.startEditing())}),s(),e(53,"svg",32),m(54,"path",33),t(),o(55," Edit Profile "),t()()()}if(i&2){let n=p();l(15),g(n.user.firstName),l(5),g(n.user.lastName),l(6),g(n.user.email),l(),u(n.user.isVerified?27:28),l(6),g(n.formattedDob||"Not provided"),l(11),N(n.user.role==="admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),l(),P(" ",n.user.role," "),l(5),g(n.memberSince)}}function Q(i,a){i&1&&o(0," First name is required ")}function W(i,a){i&1&&o(0," Minimum 3 characters ")}function X(i,a){i&1&&o(0," Letters only ")}function ee(i,a){if(i&1&&(e(0,"div",42),s(),e(1,"svg",51),m(2,"path",36),t(),x(),e(3,"p",52),c(4,Q,1,0)(5,W,1,0)(6,X,1,0),t()()),i&2){let n,r=p(2);l(4),u((n=r.form.get("firstName"))!=null&&n.hasError("required")?4:(n=r.form.get("firstName"))!=null&&n.hasError("minlength")?5:(n=r.form.get("firstName"))!=null&&n.hasError("pattern")?6:-1)}}function te(i,a){i&1&&o(0," Last name is required ")}function ie(i,a){i&1&&o(0," Minimum 3 characters ")}function ne(i,a){i&1&&o(0," Letters only ")}function oe(i,a){if(i&1&&(e(0,"div",42),s(),e(1,"svg",51),m(2,"path",36),t(),x(),e(3,"p",52),c(4,te,1,0)(5,ie,1,0)(6,ne,1,0),t()()),i&2){let n,r=p(2);l(4),u((n=r.form.get("lastName"))!=null&&n.hasError("required")?4:(n=r.form.get("lastName"))!=null&&n.hasError("minlength")?5:(n=r.form.get("lastName"))!=null&&n.hasError("pattern")?6:-1)}}function re(i,a){i&1&&(s(),e(0,"svg",53),m(1,"circle",54)(2,"path",55),t(),o(3," Saving\u2026 "))}function ae(i,a){i&1&&(s(),e(0,"svg",32),m(1,"path",35),t(),o(2," Save Changes "))}function le(i,a){if(i&1){let n=w();e(0,"form",37),S("ngSubmit",function(){_(n);let d=p();return b(d.saveProfile())}),e(1,"div")(2,"h2",38),s(),e(3,"svg",17),m(4,"path",39),t(),o(5," Edit Your Profile "),t(),x(),e(6,"div",6)(7,"div")(8,"label",40),o(9,"First Name *"),t(),m(10,"input",41),c(11,ee,7,1,"div",42),t(),e(12,"div")(13,"label",40),o(14,"Last Name *"),t(),m(15,"input",43),c(16,oe,7,1,"div",42),t(),e(17,"div",44)(18,"label",40),o(19," Date of Birth "),e(20,"span",45),o(21,"(optional)"),t()(),m(22,"input",46),t(),e(23,"div",44)(24,"label",40),o(25," Email Address "),e(26,"span",45),o(27,"(cannot be changed)"),t()(),m(28,"input",47),t()()(),e(29,"div",48)(30,"button",49),c(31,re,4,0)(32,ae,3,0),t(),e(33,"button",50),S("click",function(){_(n);let d=p();return b(d.cancelEditing())}),o(34," Cancel "),t()()()}if(i&2){let n,r,d=p();h("formGroup",d.form),l(11),u((n=d.form.get("firstName"))!=null&&n.touched&&((n=d.form.get("firstName"))!=null&&n.invalid)?11:-1),l(5),u((r=d.form.get("lastName"))!=null&&r.touched&&((r=d.form.get("lastName"))!=null&&r.invalid)?16:-1),l(6),h("max","2025-12-31"),l(6),h("value",d.user.email),l(2),h("disabled",d.saving||d.form.invalid||d.form.pristine),l(),u(d.saving?31:32),l(2),h("disabled",d.saving)}}var U=class i{constructor(a,n,r){this.fb=a;this.userService=n;this.authService=r;this.form=this.fb.group({firstName:["",[f.required,f.minLength(3),f.maxLength(15),f.pattern(/^[A-Za-z]+$/)]],lastName:["",[f.required,f.minLength(3),f.maxLength(15),f.pattern(/^[A-Za-z]+$/)]],dob:[""]})}user=null;form;loading=!0;saving=!1;editing=!1;error="";success="";ngOnInit(){this.loadProfile()}loadProfile(){this.loading=!0,this.error="",this.userService.getProfile().subscribe({next:a=>{this.user=a.user,this.populateForm(),this.loading=!1},error:a=>{this.loading=!1,this.error=a?.error?.error||a?.message||"Failed to load profile"}})}populateForm(){this.user&&this.form.patchValue({firstName:this.user.firstName,lastName:this.user.lastName,dob:this.user.dob?new Date(this.user.dob).toISOString().split("T")[0]:""})}startEditing(){this.editing=!0,this.success="",this.error=""}cancelEditing(){this.editing=!1,this.populateForm(),this.error=""}saveProfile(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving=!0,this.error="",this.success="";let{firstName:a,lastName:n,dob:r}=this.form.value,d={firstName:a,lastName:n};r&&(d.dob=r),this.userService.updateProfile(d).subscribe({next:v=>{this.saving=!1,this.editing=!1,this.user=v.user,this.success=v.message||"Profile updated successfully!",this.authService.updateCurrentUser(v.user),setTimeout(()=>this.success="",4e3)},error:v=>{this.saving=!1,this.error=v?.error?.error||v?.message||"Failed to update profile"}})}get memberSince(){return this.user?.createdAt?new Date(this.user.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""}get formattedDob(){return this.user?.dob?new Date(this.user.dob).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set"}static \u0275fac=function(n){return new(n||i)(C(A),C(H),C(z))};static \u0275cmp=y({type:i,selectors:[["app-view-profile"]],decls:5,vars:5,consts:[[1,"animate-pulse","space-y-8"],[1,"rounded-xl","bg-red-50","border","border-red-200","text-red-700","px-6","py-4","text-sm","mb-6","flex","items-start","gap-3","animate-in","fade-in"],[1,"rounded-xl","bg-green-50","border","border-green-200","text-green-700","px-6","py-4","text-sm","mb-6","flex","items-start","gap-3","animate-in","fade-in"],[1,"space-y-8"],[1,"space-y-8","animate-in","fade-in","duration-300",3,"formGroup"],[1,"h-6","bg-gray-200","rounded","w-32","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-6"],[1,"bg-gray-100","rounded-xl","p-6","space-y-3"],[1,"h-4","bg-gray-200","rounded","w-24"],[1,"h-6","bg-gray-200","rounded","w-32"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-5","w-5","shrink-0","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 8v4m0 4v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-semibold"],[1,"text-sm","mt-1"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-bold","text-gray-900","flex","items-center","gap-2"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-6","w-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-gray-500","mt-1"],[1,"bg-white","border","border-gray-200","rounded-xl","p-6","hover:shadow-md","transition-shadow"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wider","mb-2"],[1,"text-lg","font-semibold","text-gray-900"],[1,"flex","items-center","justify-between"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","rounded-full","text-xs","font-medium","bg-green-100","text-green-700"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","rounded-full","text-xs","font-medium","bg-yellow-100","text-yellow-700"],[1,"flex","items-center","gap-2","mb-6"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-6","w-6","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75L11.25 15 15 9.75m6 0a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"inline-block","px-4","py-2","rounded-lg","text-sm","font-semibold","capitalize"],[1,"flex","gap-3","pt-6","border-t","border-gray-100"],[1,"flex-1","sm:flex-none","px-8","py-3","bg-gradient-to-r","from-blue-600","to-blue-700","text-white","text-sm","font-medium","rounded-xl","hover:from-blue-700","hover:to-blue-800","transition-all","duration-200","inline-flex","items-center","justify-center","gap-2","shadow-md","hover:shadow-lg",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["fill","none","stroke","currentColor","stroke-width","2.5","viewBox","0 0 24 24",1,"h-3.5","w-3.5"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 12.75l6 6 9-13.5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"space-y-8","animate-in","fade-in","duration-300",3,"ngSubmit","formGroup"],[1,"text-lg","font-bold","text-gray-900","mb-6","flex","items-center","gap-2"],["stroke-linecap","round","stroke-linejoin","round","d","M13.828 10.172a4 4 0 00-5.656 0l-4.243 4.243a2 2 0 000 2.828l4.243 4.243a4 4 0 005.656 0l4.243-4.243a2 2 0 000-2.828l-4.243-4.243z"],[1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["type","text","formControlName","firstName","placeholder","John",1,"w-full","border","border-gray-300","rounded-xl","px-4","py-3","text-gray-900","placeholder-gray-400","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition","bg-white"],[1,"mt-2","flex","items-start","gap-2"],["type","text","formControlName","lastName","placeholder","Doe",1,"w-full","border","border-gray-300","rounded-xl","px-4","py-3","text-gray-900","placeholder-gray-400","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition","bg-white"],[1,"sm:col-span-2"],[1,"text-gray-400","font-normal"],["type","date","formControlName","dob",1,"w-full","border","border-gray-300","rounded-xl","px-4","py-3","text-gray-900","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition","bg-white",3,"max"],["type","email","disabled","",1,"w-full","border","border-gray-200","rounded-xl","px-4","py-3","bg-gray-50","text-gray-500","placeholder-gray-400","cursor-not-allowed",3,"value"],[1,"flex","items-center","gap-3","pt-6","border-t","border-gray-100"],["type","submit",1,"flex-1","sm:flex-none","px-8","py-3","bg-gradient-to-r","from-blue-600","to-blue-700","text-white","text-sm","font-medium","rounded-xl","hover:from-blue-700","hover:to-blue-800","disabled:from-gray-400","disabled:to-gray-500","disabled:cursor-not-allowed","transition-all","duration-200","inline-flex","items-center","justify-center","gap-2","shadow-md","hover:shadow-lg","disabled:shadow-none",3,"disabled"],["type","button",1,"flex-1","sm:flex-none","px-8","py-3","text-gray-700","bg-gray-100","text-sm","font-medium","rounded-xl","hover:bg-gray-200","disabled:bg-gray-100","disabled:cursor-not-allowed","transition-all","duration-200",3,"click","disabled"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-4","w-4","text-red-500","shrink-0","mt-0.5"],[1,"text-red-600","text-sm","font-medium"],["viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4","fill","none",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"]],template:function(n,r){n&1&&(c(0,R,6,1,"div",0),c(1,Y,8,1,"div",1),c(2,Z,8,1,"div",2),c(3,K,56,9,"div",3),c(4,le,35,8,"form",4)),n&2&&(u(r.loading?0:-1),l(),u(r.error&&!r.loading?1:-1),l(),u(r.success&&!r.loading?2:-1),l(),u(r.user&&!r.loading&&!r.editing?3:-1),l(),u(r.user&&!r.loading&&r.editing?4:-1))},dependencies:[M,B,I,L,F,G,D,j],encapsulation:2})};export{U as ViewProfileComponent};
