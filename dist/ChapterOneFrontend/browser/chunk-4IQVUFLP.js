import{a as B}from"./chunk-QVIW4ZK5.js";import{a as A,b as w,c as L,d as j,f as F,g as z,h as H,m as q,o as R}from"./chunk-E56WDDHT.js";import{b as W}from"./chunk-RG2YIT24.js";import"./chunk-HOACR73J.js";import"./chunk-X5XJS3OX.js";import{Aa as b,Ea as M,Pa as m,Qa as c,Tb as N,V as d,Va as u,W as h,Wa as t,Xa as n,Ya as s,cb as g,eb as P,ib as T,jb as f,kb as V,lb as l,mb as G,nb as x,sa as a}from"./chunk-QMVCZU7Z.js";function I(i,r){if(i&1&&(t(0,"div",0),d(),t(1,"svg",25),s(2,"path",26),n(),l(3),n()),i&2){let o=P();a(3),x(" ",o.error,`
`)}}function O(i,r){if(i&1&&(t(0,"div",1),d(),t(1,"svg",25),s(2,"path",27),n(),l(3),n()),i&2){let o=P();a(3),x(" ",o.success,`
`)}}function U(i,r){i&1&&(d(),t(0,"svg",16),s(1,"path",28),n())}function Z(i,r){i&1&&(d(),t(0,"svg",16),s(1,"path",29)(2,"path",30),n())}function J(i,r){i&1&&(t(0,"small",17),l(1,"Current password is required"),n())}function K(i,r){i&1&&(d(),t(0,"svg",16),s(1,"path",28),n())}function Q(i,r){i&1&&(d(),t(0,"svg",16),s(1,"path",29)(2,"path",30),n())}function X(i,r){i&1&&(t(0,"small",17),l(1,"New password is required"),n())}function Y(i,r){i&1&&(t(0,"small",17),l(1,"Minimum 8 characters"),n())}function $(i,r){if(i&1&&(t(0,"div",20)(1,"div",31),s(2,"div",32),n(),t(3,"small"),l(4),n()()),i&2){let o=P();a(2),T("width",o.passwordStrength.label==="Weak"?"33%":o.passwordStrength.label==="Medium"?"66%":"100%"),f("bg-red-500",o.passwordStrength.label==="Weak")("bg-yellow-400",o.passwordStrength.label==="Medium")("bg-green-500",o.passwordStrength.label==="Strong"),a(),V(o.passwordStrength.label==="Weak"?"text-red-600":o.passwordStrength.label==="Medium"?"text-yellow-600":"text-green-600"),a(),G(o.passwordStrength.label)}}function ee(i,r){i&1&&(d(),t(0,"svg",16),s(1,"path",28),n())}function te(i,r){i&1&&(d(),t(0,"svg",16),s(1,"path",29)(2,"path",30),n())}function ne(i,r){i&1&&(t(0,"small",17),l(1,"Passwords do not match"),n())}function ie(i,r){i&1&&(d(),t(0,"svg",33),s(1,"circle",34)(2,"path",35),n(),l(3,"Changing\u2026 "))}function re(i,r){i&1&&(d(),t(0,"svg",12),s(1,"path",4),n(),l(2," Change Password "))}var D=class i{constructor(r,o,e){this.fb=r;this.userService=o;this.authService=e;this.form=this.fb.group({currentPassword:["",[w.required]],newPassword:["",[w.required,w.minLength(8),w.maxLength(50)]],confirmPassword:["",[w.required]]},{validators:this.passwordsMatch})}form;loading=!1;error="";success="";showCurrentPassword=!1;showNewPassword=!1;showConfirmPassword=!1;passwordsMatch(r){let o=r.get("newPassword")?.value,e=r.get("confirmPassword")?.value;return o===e?null:{passwordsMismatch:!0}}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.error="",this.success="";let{currentPassword:r,newPassword:o}=this.form.value;this.userService.changePassword(r,o).subscribe({next:e=>{this.loading=!1,this.success=e.message||"Password changed successfully!",this.form.reset(),setTimeout(()=>this.success="",5e3)},error:e=>{this.loading=!1,this.error=e?.error?.error||e?.message||"Failed to change password"}})}get passwordStrength(){let r=this.form.get("newPassword")?.value||"";if(r.length===0)return{label:"",color:"",width:"w-0"};let o=0;return r.length>=8&&o++,r.length>=12&&o++,/[A-Z]/.test(r)&&o++,/[0-9]/.test(r)&&o++,/[^A-Za-z0-9]/.test(r)&&o++,o<=2?{label:"Weak",color:"bg-red-500",width:"w-1/3"}:o<=3?{label:"Medium",color:"bg-yellow-500",width:"w-2/3"}:{label:"Strong",color:"bg-green-500",width:"w-full"}}toggleVisibility(r){switch(r){case"current":this.showCurrentPassword=!this.showCurrentPassword;break;case"new":this.showNewPassword=!this.showNewPassword;break;case"confirm":this.showConfirmPassword=!this.showConfirmPassword;break}}static \u0275fac=function(o){return new(o||i)(b(q),b(B),b(W))};static \u0275cmp=M({type:i,selectors:[["app-change-password"]],decls:56,vars:22,consts:[[1,"bg-red-50","border","border-red-100","text-red-700","text-sm","px-3","py-2","rounded","flex","items-center","gap-2"],[1,"bg-green-50","border","border-green-100","text-green-700","text-sm","px-3","py-2","rounded","flex","items-center","gap-2"],[1,"bg-gray-50","border","border-gray-100","rounded","p-4","mb-4","flex","gap-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-5","h-5","text-green-600","mt-1","shrink-0"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"],[1,"font-semibold","text-sm","mb-1"],[1,"text-sm","text-gray-500","mb-0","ml-4","list-disc"],[1,"max-w-md",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"text-xs","text-gray-500"],[1,"flex","items-stretch","border","border-gray-200","rounded","overflow-hidden"],[1,"px-3","flex","items-center","bg-white","text-gray-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"],["formControlName","currentPassword","placeholder","Enter current password",1,"flex-1","px-3","py-2",3,"type"],["type","button",1,"px-3","bg-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4","text-gray-500"],[1,"text-red-600"],["stroke-linecap","round","stroke-linejoin","round","d","M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"],["formControlName","newPassword","placeholder","Enter new password",1,"flex-1","px-3","py-2",3,"type"],[1,"mt-2"],[1,"mb-4"],["formControlName","confirmPassword","placeholder","Re-enter new password",1,"flex-1","px-3","py-2",3,"type"],[1,"border-t","my-4"],["type","submit",1,"px-4","py-2","bg-green-600","text-white","rounded","inline-flex","items-center","gap-2",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4","shrink-0"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"w-full","bg-gray-200","rounded","h-1","overflow-hidden"],[1,"h-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"]],template:function(o,e){if(o&1&&(m(0,I,4,1,"div",0),m(1,O,4,1,"div",1),t(2,"div",2),d(),t(3,"svg",3),s(4,"path",4),n(),h(),t(5,"div")(6,"p",5),l(7,"Password Requirements"),n(),t(8,"ul",6)(9,"li"),l(10,"Minimum 8 characters"),n(),t(11,"li"),l(12,"Mix of letters, numbers, and symbols recommended"),n()()()(),t(13,"form",7),g("ngSubmit",function(){return e.onSubmit()}),t(14,"div",8)(15,"label",9),l(16,"CURRENT PASSWORD"),n(),t(17,"div",10)(18,"div",11),d(),t(19,"svg",12),s(20,"path",13),n()(),h(),s(21,"input",14),t(22,"button",15),g("click",function(){return e.toggleVisibility("current")}),m(23,U,2,0,":svg:svg",16)(24,Z,3,0,":svg:svg",16),n()(),m(25,J,2,0,"small",17),n(),t(26,"div",8)(27,"label",9),l(28,"NEW PASSWORD"),n(),t(29,"div",10)(30,"div",11),d(),t(31,"svg",12),s(32,"path",18),n()(),h(),s(33,"input",19),t(34,"button",15),g("click",function(){return e.toggleVisibility("new")}),m(35,K,2,0,":svg:svg",16)(36,Q,3,0,":svg:svg",16),n()(),m(37,X,2,0,"small",17),m(38,Y,2,0,"small",17),m(39,$,5,11,"div",20),n(),t(40,"div",21)(41,"label",9),l(42,"CONFIRM NEW PASSWORD"),n(),t(43,"div",10)(44,"div",11),d(),t(45,"svg",12),s(46,"path",18),n()(),h(),s(47,"input",22),t(48,"button",15),g("click",function(){return e.toggleVisibility("confirm")}),m(49,ee,2,0,":svg:svg",16)(50,te,3,0,":svg:svg",16),n()(),m(51,ne,2,0,"small",17),n(),s(52,"div",23),t(53,"button",24),m(54,ie,4,0)(55,re,3,0),n()()),o&2){let p,v,C,S,_,E,y,k;c(e.error?0:-1),a(),c(e.success?1:-1),a(12),u("formGroup",e.form),a(8),f("border-red-500",((p=e.form.get("currentPassword"))==null?null:p.touched)&&((p=e.form.get("currentPassword"))==null?null:p.hasError("required"))),u("type",e.showCurrentPassword?"text":"password"),a(2),c(e.showCurrentPassword?23:24),a(2),c((v=e.form.get("currentPassword"))!=null&&v.touched&&((v=e.form.get("currentPassword"))!=null&&v.hasError("required"))?25:-1),a(8),f("border-red-500",((C=e.form.get("newPassword"))==null?null:C.touched)&&((C=e.form.get("newPassword"))==null?null:C.invalid)),u("type",e.showNewPassword?"text":"password"),a(2),c(e.showNewPassword?35:36),a(2),c((S=e.form.get("newPassword"))!=null&&S.touched&&((S=e.form.get("newPassword"))!=null&&S.hasError("required"))?37:-1),a(),c((_=e.form.get("newPassword"))!=null&&_.touched&&((_=e.form.get("newPassword"))!=null&&_.hasError("minlength"))?38:-1),a(),c((E=e.form.get("newPassword"))!=null&&E.value?39:-1),a(8),f("border-red-500",((y=e.form.get("confirmPassword"))==null?null:y.touched)&&e.form.hasError("passwordsMismatch")),u("type",e.showConfirmPassword?"text":"password"),a(2),c(e.showConfirmPassword?49:50),a(2),c((k=e.form.get("confirmPassword"))!=null&&k.touched&&e.form.hasError("passwordsMismatch")?51:-1),a(2),u("disabled",e.loading||e.form.invalid),a(),c(e.loading?54:55)}},dependencies:[N,R,F,A,L,j,H,z],encapsulation:2})};export{D as ChangePasswordComponent};
