import{a as q}from"./chunk-WI4WJIFX.js";import{b as z}from"./chunk-DZG2A23L.js";import{a as M,b as w,c as T,d as V,f as N,g as G,h as A,m as j,o as F}from"./chunk-SPKWXH6Y.js";import"./chunk-HOACR73J.js";import{$ as e,I as a,Ja as E,L as C,M as y,U as m,V as c,_ as p,aa as n,ba as l,ha as g,ja as v,la as _,ma as s,oa as b,va as k,y as d,z as P}from"./chunk-VPDMBE7M.js";function L(t,r){if(t&1&&(e(0,"div",0),d(),e(1,"svg",19),l(2,"path",20),n(),s(3),n()),t&2){let o=v();a(3),b(" ",o.error," ")}}function I(t,r){if(t&1&&(e(0,"div",1),d(),e(1,"svg",19),l(2,"path",21),n(),s(3),n()),t&2){let o=v();a(3),b(" ",o.success," ")}}function D(t,r){t&1&&(d(),e(0,"svg",12),l(1,"path",22),n())}function H(t,r){t&1&&(d(),e(0,"svg",12),l(1,"path",23)(2,"path",24),n())}function U(t,r){t&1&&(e(0,"p",13),s(1,"Current password is required"),n())}function R(t,r){t&1&&(d(),e(0,"svg",12),l(1,"path",22),n())}function W(t,r){t&1&&(d(),e(0,"svg",12),l(1,"path",23)(2,"path",24),n())}function Z(t,r){t&1&&(e(0,"p",13),s(1,"New password is required"),n())}function J(t,r){t&1&&(e(0,"p",13),s(1,"Minimum 8 characters"),n())}function K(t,r){if(t&1&&(e(0,"div",15)(1,"div",25),l(2,"div"),n(),e(3,"p",26),s(4),n()()),t&2){let o=v();a(2),_(k(`h-full rounded-full transition-all duration-300
                      `,o.passwordStrength.color," ",o.passwordStrength.width)),a(),_(o.passwordStrength.label==="Weak"?"text-red-500":o.passwordStrength.label==="Medium"?"text-yellow-600":"text-green-600"),a(),b(" ",o.passwordStrength.label," ")}}function O(t,r){t&1&&(d(),e(0,"svg",12),l(1,"path",22),n())}function Q(t,r){t&1&&(d(),e(0,"svg",12),l(1,"path",23)(2,"path",24),n())}function X(t,r){t&1&&(e(0,"p",13),s(1,"Passwords do not match"),n())}function Y(t,r){t&1&&(d(),e(0,"svg",27),l(1,"circle",28)(2,"path",29),n(),s(3," Changing\u2026 "))}function $(t,r){t&1&&(d(),e(0,"svg",30),l(1,"path",31),n(),s(2," Change Password "))}var B=class t{constructor(r,o,i){this.fb=r;this.userService=o;this.authService=i;this.form=this.fb.group({currentPassword:["",[w.required]],newPassword:["",[w.required,w.minLength(8),w.maxLength(50)]],confirmPassword:["",[w.required]]},{validators:this.passwordsMatch})}form;loading=!1;error="";success="";showCurrentPassword=!1;showNewPassword=!1;showConfirmPassword=!1;passwordsMatch(r){let o=r.get("newPassword")?.value,i=r.get("confirmPassword")?.value;return o===i?null:{passwordsMismatch:!0}}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.error="",this.success="";let{currentPassword:r,newPassword:o}=this.form.value;this.userService.changePassword(r,o).subscribe({next:i=>{this.loading=!1,this.success=i.message||"Password changed successfully!",this.form.reset(),setTimeout(()=>this.success="",5e3)},error:i=>{this.loading=!1,this.error=i?.error?.error||i?.message||"Failed to change password"}})}get passwordStrength(){let r=this.form.get("newPassword")?.value||"";if(r.length===0)return{label:"",color:"",width:"w-0"};let o=0;return r.length>=8&&o++,r.length>=12&&o++,/[A-Z]/.test(r)&&o++,/[0-9]/.test(r)&&o++,/[^A-Za-z0-9]/.test(r)&&o++,o<=2?{label:"Weak",color:"bg-red-500",width:"w-1/3"}:o<=3?{label:"Medium",color:"bg-yellow-500",width:"w-2/3"}:{label:"Strong",color:"bg-green-500",width:"w-full"}}toggleVisibility(r){switch(r){case"current":this.showCurrentPassword=!this.showCurrentPassword;break;case"new":this.showNewPassword=!this.showNewPassword;break;case"confirm":this.showConfirmPassword=!this.showConfirmPassword;break}}static \u0275fac=function(o){return new(o||t)(C(j),C(q),C(z))};static \u0275cmp=y({type:t,selectors:[["app-change-password"]],decls:49,vars:16,consts:[[1,"rounded-lg","bg-red-50","border","border-red-200","text-red-700","px-4","py-3","text-sm","mb-6","flex","items-center","gap-2"],[1,"rounded-lg","bg-green-50","border","border-green-200","text-green-700","px-4","py-3","text-sm","mb-6","flex","items-center","gap-2"],[1,"rounded-lg","bg-blue-50","border","border-blue-200","px-4","py-3","text-sm","text-blue-700","mb-6","flex","items-start","gap-2"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-5","w-5","shrink-0","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","d",`M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6
         11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332
         9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196
         0-6.1-1.248-8.25-3.285z`],[1,"font-medium"],[1,"mt-1","text-xs","space-y-0.5","text-blue-600"],[1,"space-y-5","max-w-md",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"relative"],["formControlName","currentPassword","placeholder","Enter current password",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","pr-12","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition",3,"type"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-5","w-5"],[1,"text-red-500","text-xs","mt-1"],["formControlName","newPassword","placeholder","Enter new password",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","pr-12","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition",3,"type"],[1,"mt-2"],["formControlName","confirmPassword","placeholder","Re-enter new password",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","pr-12","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition",3,"type"],[1,"pt-4","border-t","border-gray-100"],["type","submit",1,"px-6","py-2.5","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:bg-blue-700","disabled:bg-blue-400","disabled:cursor-not-allowed","transition","inline-flex","items-center","gap-2",3,"disabled"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-5","w-5","shrink-0"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","d",`M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12
                 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112
                 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293
                 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21
                 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88`],["stroke-linecap","round","stroke-linejoin","round","d",`M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12
                 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0
                 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638
                 0-8.573-3.007-9.963-7.178z`],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"h-1.5","w-full","bg-gray-200","rounded-full","overflow-hidden"],[1,"text-xs","mt-1"],["viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4","fill","none",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","d",`M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25
               2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25
               2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z`]],template:function(o,i){if(o&1&&(e(0,"p"),s(1,"change-password works!"),n(),m(2,L,4,1,"div",0),m(3,I,4,1,"div",1),e(4,"div",2),d(),e(5,"svg",3),l(6,"path",4),n(),P(),e(7,"div")(8,"p",5),s(9,"Password requirements"),n(),e(10,"ul",6)(11,"li"),s(12,"\u2022 Minimum 8 characters"),n(),e(13,"li"),s(14,"\u2022 Use a mix of letters, numbers, and symbols for best security"),n()()()(),e(15,"form",7),g("ngSubmit",function(){return i.onSubmit()}),e(16,"div")(17,"label",8),s(18,"Current Password"),n(),e(19,"div",9),l(20,"input",10),e(21,"button",11),g("click",function(){return i.toggleVisibility("current")}),m(22,D,2,0,":svg:svg",12)(23,H,3,0,":svg:svg",12),n()(),m(24,U,2,0,"p",13),n(),e(25,"div")(26,"label",8),s(27,"New Password"),n(),e(28,"div",9),l(29,"input",14),e(30,"button",11),g("click",function(){return i.toggleVisibility("new")}),m(31,R,2,0,":svg:svg",12)(32,W,3,0,":svg:svg",12),n()(),m(33,Z,2,0,"p",13),m(34,J,2,0,"p",13),m(35,K,5,7,"div",15),n(),e(36,"div")(37,"label",8),s(38,"Confirm New Password"),n(),e(39,"div",9),l(40,"input",16),e(41,"button",11),g("click",function(){return i.toggleVisibility("confirm")}),m(42,O,2,0,":svg:svg",12)(43,Q,3,0,":svg:svg",12),n()(),m(44,X,2,0,"p",13),n(),e(45,"div",17)(46,"button",18),m(47,Y,4,0)(48,$,3,0),n()()()),o&2){let u,h,f,S,x;a(2),c(i.error?2:-1),a(),c(i.success?3:-1),a(12),p("formGroup",i.form),a(5),p("type",i.showCurrentPassword?"text":"password"),a(2),c(i.showCurrentPassword?22:23),a(2),c((u=i.form.get("currentPassword"))!=null&&u.touched&&((u=i.form.get("currentPassword"))!=null&&u.hasError("required"))?24:-1),a(5),p("type",i.showNewPassword?"text":"password"),a(2),c(i.showNewPassword?31:32),a(2),c((h=i.form.get("newPassword"))!=null&&h.touched&&((h=i.form.get("newPassword"))!=null&&h.hasError("required"))?33:-1),a(),c((f=i.form.get("newPassword"))!=null&&f.touched&&((f=i.form.get("newPassword"))!=null&&f.hasError("minlength"))?34:-1),a(),c((S=i.form.get("newPassword"))!=null&&S.value?35:-1),a(5),p("type",i.showConfirmPassword?"text":"password"),a(2),c(i.showConfirmPassword?42:43),a(2),c((x=i.form.get("confirmPassword"))!=null&&x.touched&&i.form.hasError("passwordsMismatch")?44:-1),a(2),p("disabled",i.loading||i.form.invalid),a(),c(i.loading?47:48)}},dependencies:[E,F,N,M,T,V,A,G],encapsulation:2})};export{B as ChangePasswordComponent};
