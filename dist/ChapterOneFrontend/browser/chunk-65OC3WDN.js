import{a as Z}from"./chunk-CSFBZRFP.js";import{c as q,e as Y,i as J,j as K,k as Q,n as X}from"./chunk-SPKWXH6Y.js";import"./chunk-HOACR73J.js";import{$ as n,Aa as z,Ba as G,H as L,Ha as H,I as a,Ia as U,Ja as W,L as P,M as I,Sa as R,T as M,U as c,V as m,W as F,X as V,Y as v,Z as h,_ as y,aa as r,ba as p,fa as S,ha as x,ja as d,la as O,ma as l,na as k,oa as u,pa as w,ra as B,sa as j,ta as N,ua as $,w as C,x as b,xa as A,y as f,ya as D,z as T,za as E}from"./chunk-VPDMBE7M.js";var te=()=>[1,2,3],ie=t=>["/orders",t],ne=(t,i)=>i.value,re=(t,i)=>i._id;function oe(t,i){if(t&1&&(n(0,"p",3),l(1),r()),t&2){let e=d();a(),w(" ",e.totalItems," order",e.totalItems!==1?"s":""," total ")}}function ae(t,i){if(t&1&&(n(0,"option",6),l(1),r()),t&2){let e=i.$implicit;y("value",e.value),a(),k(e.label)}}function le(t,i){t&1&&(n(0,"div",12)(1,"div",13)(2,"div",14),p(3,"div",15)(4,"div",16),r(),p(5,"div",17),r()())}function de(t,i){t&1&&(n(0,"div",9),v(1,le,6,0,"div",12,V),r()),t&2&&(a(),h(A(0,te)))}function se(t,i){if(t&1){let e=S();n(0,"div",10)(1,"div",18),f(),n(2,"svg",19),p(3,"path",20),r()(),T(),n(4,"h3",21),l(5,"Something went wrong"),r(),n(6,"p",22),l(7),r(),n(8,"button",23),x("click",function(){C(e);let s=d();return b(s.loadOrders())}),l(9," Try Again "),r()()}if(t&2){let e=d();a(7),k(e.error)}}function ce(t,i){if(t&1){let e=S();n(0,"h3",21),l(1),r(),n(2,"p",22),l(3,"You don't have any orders with this status"),r(),n(4,"button",27),x("click",function(){C(e);let s=d(2);return s.selectedStatus="all",b(s.onStatusChange())}),l(5," View All Orders "),r()}if(t&2){let e=d(2);a(),u("No ",e.selectedStatus," orders")}}function me(t,i){t&1&&(n(0,"h3",21),l(1,"No orders yet"),r(),n(2,"p",22),l(3,"Browse our collection and place your first order!"),r(),n(4,"a",28),l(5," Browse Books "),r())}function pe(t,i){if(t&1&&(n(0,"div",11)(1,"div",24),f(),n(2,"svg",25),p(3,"path",26),r()(),c(4,ce,6,1)(5,me,6,0),r()),t&2){let e=d();a(4),m(e.selectedStatus!=="all"?4:5)}}function ue(t,i){if(t&1&&p(0,"img",48),t&2){let e=d().$implicit;y("src",e.book==null?null:e.book.coverUrl,L)("alt",(e.book==null?null:e.book.title)||"Book")}}function _e(t,i){t&1&&(n(0,"div",49),f(),n(1,"svg",50),p(2,"path",51),r()())}function ge(t,i){if(t&1&&c(0,ue,1,2,"img",48)(1,_e,3,0,"div",49),t&2){let e=i.$implicit;m(e.book!=null&&e.book.coverUrl?0:1)}}function xe(t,i){if(t&1&&(n(0,"div",36),l(1),r()),t&2){let e=d().$implicit;a(),u(" +",e.items.length-4," ")}}function Ce(t,i){if(t&1&&(n(0,"span",52),l(1),r()),t&2){let e=d(2).$implicit;a(),u(" and ",e.items.length-1," more ")}}function be(t,i){if(t&1&&(n(0,"p",38),l(1),c(2,Ce,2,1,"span",52),r()),t&2){let e=d().$implicit;a(),u(" ",(e.items[0].book==null?null:e.items[0].book.title)||"Book (unavailable)"," "),a(),m(e.items.length>1?2:-1)}}function fe(t,i){t&1&&(n(0,"p",39),l(1,"No items"),r())}function ve(t,i){if(t&1&&(n(0,"a",29)(1,"div",31)(2,"div")(3,"h3",32),l(4),r(),n(5,"p",33),l(6),E(7,"date"),r()(),n(8,"span"),l(9),r()(),n(10,"div",34)(11,"div",35),v(12,ge,2,1,null,null,re),c(14,xe,2,1,"div",36),r(),n(15,"div",37),c(16,be,3,2,"p",38)(17,fe,2,0,"p",39),n(18,"p",40),l(19),r()()(),n(20,"div",41)(21,"div",42)(22,"span",43),l(23),E(24,"currency"),r(),n(25,"span",44),l(26),r()(),n(27,"div",45),l(28," View Details "),f(),n(29,"svg",46),p(30,"path",47),r()()()()),t&2){let e=i.$implicit,o=d(2);y("routerLink",D(21,ie,e._id)),a(4),u(" Order #",e._id.slice(-8).toUpperCase()," "),a(2),u(" ",G(7,16,e.createdAt,"MMMM d, y \u2014 h:mm a")," "),a(2),O($(`shrink-0 px-3 py-1 rounded-full text-xs font-semibold capitalize border
                         `,o.getStatusConfig(e.status).color)),a(),w(" ",o.getStatusConfig(e.status).icon," ",e.status," "),a(3),h(e.items.slice(0,4)),a(2),m(e.items.length>4?14:-1),a(2),m(e.items.length>0?16:17),a(3),k(o.getItemsSummary(e)),a(4),u(" ",z(24,19,e.total_price)," "),a(2),O(e.payment_status==="paid"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),a(),w(" ",e.payment_method," \xB7 ",e.payment_status," ")}}function he(t,i){t&1&&(n(0,"span",56),l(1,"\u2026"),r())}function ye(t,i){if(t&1){let e=S();n(0,"button",58),x("click",function(){C(e);let s=d().$implicit,_=d(3);return b(_.goToPage(+s))}),l(1),r()}if(t&2){let e=d().$implicit,o=d(3);O(e===o.currentPage?"px-3 py-2 rounded-lg text-sm font-medium bg-blue-600 text-white":"px-3 py-2 rounded-lg text-sm font-medium border border-gray-300 hover:bg-gray-50 transition"),a(),u(" ",e," ")}}function Se(t,i){if(t&1&&c(0,he,2,0,"span",56)(1,ye,2,3,"button",57),t&2){let e=i.$implicit;m(e==="..."?0:1)}}function we(t,i){if(t&1){let e=S();n(0,"nav",30)(1,"p",53),l(2),r(),n(3,"div",54)(4,"button",55),x("click",function(){C(e);let s=d(2);return b(s.goToPage(s.currentPage-1))}),l(5," \u2190 Prev "),r(),v(6,Se,2,1,null,null,F),n(8,"button",55),x("click",function(){C(e);let s=d(2);return b(s.goToPage(s.currentPage+1))}),l(9," Next \u2192 "),r()()()}if(t&2){let e=d(2);a(2),w(" Page ",e.currentPage," of ",e.totalPages," "),a(2),y("disabled",e.currentPage===1),a(2),h(e.pageNumbers),a(2),y("disabled",e.currentPage===e.totalPages)}}function Oe(t,i){if(t&1&&(n(0,"div",9),v(1,ve,31,23,"a",29,M().trackByOrderId,!0),r(),c(3,we,10,4,"nav",30)),t&2){let e=d();a(),h(e.orders),a(2),m(e.totalPages>1?3:-1)}}var ee=class t{constructor(i){this.orderService=i}orders=[];loading=!0;error="";currentPage=1;totalPages=1;totalItems=0;limit=10;selectedStatus="all";statuses=[{value:"all",label:"All Orders"},{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}];ngOnInit(){this.loadOrders()}loadOrders(){this.loading=!0,this.error="",this.orderService.getMyOrders(this.currentPage,this.limit,this.selectedStatus).subscribe({next:i=>{this.orders=i.items,this.totalItems=i.total,this.totalPages=i.PagesNumber,this.loading=!1,console.log("Orders loaded:",this.orders)},error:i=>{this.loading=!1,this.error=i?.error?.error||i?.message||"Failed to load orders",console.error("Order load error:",i)}})}onStatusChange(){this.currentPage=1,this.loadOrders()}goToPage(i){i<1||i>this.totalPages||(this.currentPage=i,this.loadOrders(),window.scrollTo({top:0,behavior:"smooth"}))}get pageNumbers(){let i=this.totalPages,e=this.currentPage,o=[];if(i<=7){for(let g=1;g<=i;g++)o.push(g);return o}o.push(1),e>3&&o.push("...");let s=Math.max(2,e-1),_=Math.min(i-1,e+1);for(let g=s;g<=_;g++)o.push(g);return e<i-2&&o.push("..."),o.push(i),o}getStatusConfig(i){return{pending:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"\u{1F550}"},processing:{color:"bg-blue-100 text-blue-800 border-blue-200",icon:"\u2699\uFE0F"},shipped:{color:"bg-purple-100 text-purple-800 border-purple-200",icon:"\u{1F69A}"},delivered:{color:"bg-green-100 text-green-800 border-green-200",icon:"\u2705"},cancelled:{color:"bg-red-100 text-red-800 border-red-200",icon:"\u274C"}}[i]||{color:"bg-gray-100 text-gray-800",icon:"\u{1F4E6}"}}getItemsSummary(i){let e=i.items.reduce((o,s)=>o+s.quantity,0);return`${e} item${e!==1?"s":""}`}trackByOrderId(i,e){return e._id}static \u0275fac=function(e){return new(e||t)(P(Z))};static \u0275cmp=I({type:t,selectors:[["app-order-list"]],decls:16,vars:6,consts:[[1,"max-w-4xl","mx-auto","px-4","py-8"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500","mt-1"],[1,"relative"],[1,"appearance-none","bg-white","border","border-gray-300","rounded-lg","px-4","py-2.5","pr-10","text-sm","font-medium","text-gray-700","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","cursor-pointer",3,"ngModelChange","ngModel"],[3,"value"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"absolute","right-3","top-1/2","-translate-y-1/2","h-4","w-4","text-gray-400","pointer-events-none"],["stroke-linecap","round","stroke-linejoin","round","d","M19.5 8.25l-7.5 7.5-7.5-7.5"],[1,"space-y-4"],[1,"bg-white","border","border-gray-200","rounded-xl","p-8","text-center"],[1,"bg-white","border","border-gray-200","rounded-xl","p-12","text-center"],[1,"animate-pulse","bg-white","border","border-gray-200","rounded-xl","p-5"],[1,"flex","justify-between"],[1,"space-y-3","flex-1"],[1,"h-4","bg-gray-200","rounded","w-48"],[1,"h-3","bg-gray-200","rounded","w-32"],[1,"h-6","bg-gray-200","rounded-full","w-24"],[1,"mx-auto","mb-4","flex","h-16","w-16","items-center","justify-center","rounded-full","bg-red-100"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-8","w-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"],[1,"text-lg","font-semibold","text-gray-900","mb-1"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:bg-blue-700","transition",3,"click"],[1,"mx-auto","mb-4","flex","h-20","w-20","items-center","justify-center","rounded-full","bg-gray-100"],["fill","none","stroke","currentColor","stroke-width","1.5","viewBox","0 0 24 24",1,"h-10","w-10","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","d",`M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5
               m8.25 3v6.75m0 0l-3-3m3 3l3-3
               M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375
               c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z`],[1,"px-4","py-2","bg-gray-100","text-gray-700","text-sm","font-medium","rounded-lg","hover:bg-gray-200","transition",3,"click"],["routerLink","/books",1,"inline-block","px-6","py-2.5","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:bg-blue-700","transition"],[1,"block","bg-white","border","border-gray-200","rounded-xl","p-5","hover:border-blue-300","hover:shadow-md","transition-all","duration-200","group",3,"routerLink"],[1,"flex","items-center","justify-between","mt-8","pt-6","border-t","border-gray-200"],[1,"flex","items-start","justify-between","gap-4","mb-3"],[1,"font-semibold","text-gray-900","group-hover:text-blue-600","transition-colors"],[1,"text-sm","text-gray-500","mt-0.5"],[1,"flex","items-center","gap-3","mb-3"],[1,"flex","-space-x-4"],[1,"w-16","h-24","bg-gray-200","rounded","border-2","border-white","shadow-sm","flex","items-center","justify-center","text-xs","font-medium","text-gray-600"],[1,"text-sm","text-gray-600"],[1,"line-clamp-1"],[1,"text-gray-400","italic"],[1,"text-xs","text-gray-400"],[1,"flex","items-center","justify-between","pt-3","border-t","border-gray-100"],[1,"flex","items-center","gap-3"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-xs","px-2","py-0.5","rounded-full"],[1,"flex","items-center","gap-1","text-sm","text-blue-600","font-medium","opacity-0","group-hover:opacity-100","transition-opacity"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"h-4","w-4","transform","group-hover:translate-x-1","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","d","M9 5l7 7-7 7"],[1,"w-16","h-24","object-cover","rounded","border-2","border-white","shadow-sm",3,"src","alt"],[1,"w-16","h-24","bg-gray-100","rounded","border-2","border-white","shadow-sm","flex","items-center","justify-center"],["fill","none","stroke","currentColor","stroke-width","1.5","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","d",`M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25
                           A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966
                           8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018
                           18a8.967 8.967 0 00-6 2.292m0-14.25v14.25`],[1,"text-gray-400"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","gap-1"],[1,"px-3","py-2","rounded-lg","border","border-gray-300","text-sm","font-medium","disabled:opacity-40","disabled:cursor-not-allowed","hover:bg-gray-50","transition",3,"click","disabled"],[1,"px-2","py-2","text-sm","text-gray-400"],[3,"class"],[3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),l(4,"My Orders"),r(),c(5,oe,2,2,"p",3),r(),n(6,"div",4)(7,"select",5),N("ngModelChange",function(_){return j(o.selectedStatus,_)||(o.selectedStatus=_),_}),x("ngModelChange",function(){return o.onStatusChange()}),v(8,ae,2,2,"option",6,ne),r(),f(),n(10,"svg",7),p(11,"path",8),r()()(),c(12,de,3,1,"div",9),c(13,se,10,1,"div",10),c(14,pe,6,1,"div",11),c(15,Oe,4,1),r()),e&2&&(a(5),m(!o.loading&&o.totalItems>0?5:-1),a(2),B("ngModel",o.selectedStatus),a(),h(o.statuses),a(4),m(o.loading?12:-1),a(),m(o.error&&!o.loading?13:-1),a(),m(!o.loading&&!o.error&&o.orders.length===0?14:-1),a(),m(!o.loading&&!o.error&&o.orders.length>0?15:-1))},dependencies:[W,R,X,K,Q,J,q,Y,U,H],encapsulation:2})};export{ee as OrderListComponent};
