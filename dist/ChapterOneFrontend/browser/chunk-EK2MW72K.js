import{b as A}from"./chunk-DZG2A23L.js";import{a as L,b as s,c as T,d as F,f as N,g as k,h as G,m as I,o as q}from"./chunk-SPKWXH6Y.js";import"./chunk-HOACR73J.js";import{$ as t,I as l,Ja as y,L as g,M as v,Ra as w,Sa as E,U as m,V as d,_ as h,aa as i,ba as b,ha as C,ja as _,ma as r,oa as S,y as x}from"./chunk-VPDMBE7M.js";function M(e,n){if(e&1&&(t(0,"div",3),r(1),i()),e&2){let a=_();l(),S(" ",a.error," ")}}function R(e,n){e&1&&(t(0,"p",7),r(1,"Email is required"),i())}function j(e,n){e&1&&(t(0,"p",7),r(1,"Enter a valid email address"),i())}function B(e,n){e&1&&(t(0,"p",7),r(1,"Password is required"),i())}function V(e,n){e&1&&(t(0,"p",7),r(1,"Minimum 8 characters"),i())}function P(e,n){e&1&&(t(0,"span",11),x(),t(1,"svg",14),b(2,"circle",15)(3,"path",16),i(),r(4," Signing in\u2026 "),i())}function z(e,n){e&1&&r(0," Sign In ")}var D=class e{constructor(n,a,o){this.fb=n;this.auth=a;this.router=o;this.form=this.fb.group({email:["",[s.required,s.email]],password:["",[s.required,s.minLength(8)]]})}form;error="";loading=!1;onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.error="",this.auth.login(this.form.value).subscribe({next:()=>{this.loading=!1;let n=this.auth.currentUser?.role;this.router.navigate([n==="admin"?"/admin":"/"])},error:n=>{this.loading=!1,this.error=n?.error?.error||n?.message||"Login failed"}})}static \u0275fac=function(a){return new(a||e)(g(I),g(A),g(w))};static \u0275cmp=v({type:e,selectors:[["app-login"]],decls:25,vars:8,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","px-4"],[1,"w-full","max-w-md","bg-white","rounded-2xl","shadow-lg","p-8"],[1,"text-2xl","font-bold","text-center","mb-6"],[1,"mb-4","rounded-lg","bg-red-50","border","border-red-200","text-red-700","px-4","py-3","text-sm"],[1,"space-y-5",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","type","email","formControlName","email","placeholder","you@example.com",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition"],[1,"text-red-500","text-xs","mt-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition"],["type","submit",1,"w-full","bg-blue-600","hover:bg-blue-700","disabled:bg-blue-400","text-white","font-semibold","py-2.5","rounded-lg","transition",3,"disabled"],[1,"inline-flex","items-center","gap-2"],[1,"text-center","text-sm","text-gray-500","mt-6"],["routerLink","/auth/register",1,"text-blue-600","hover:underline","font-medium"],["viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4","fill","none",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"]],template:function(a,o){if(a&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Sign In"),i(),m(4,M,2,1,"div",3),t(5,"form",4),C("ngSubmit",function(){return o.onSubmit()}),t(6,"div")(7,"label",5),r(8,"Email"),i(),b(9,"input",6),m(10,R,2,0,"p",7),m(11,j,2,0,"p",7),i(),t(12,"div")(13,"label",8),r(14,"Password"),i(),b(15,"input",9),m(16,B,2,0,"p",7),m(17,V,2,0,"p",7),i(),t(18,"button",10),m(19,P,5,0,"span",11)(20,z,1,0),i()(),t(21,"p",12),r(22," Don't have an account? "),t(23,"a",13),r(24,"Register"),i()()()()),a&2){let u,p,c,f;l(4),d(o.error?4:-1),l(),h("formGroup",o.form),l(5),d((u=o.form.get("email"))!=null&&u.touched&&((u=o.form.get("email"))!=null&&u.hasError("required"))?10:-1),l(),d((p=o.form.get("email"))!=null&&p.touched&&((p=o.form.get("email"))!=null&&p.hasError("email"))?11:-1),l(5),d((c=o.form.get("password"))!=null&&c.touched&&((c=o.form.get("password"))!=null&&c.hasError("required"))?16:-1),l(),d((f=o.form.get("password"))!=null&&f.touched&&((f=o.form.get("password"))!=null&&f.hasError("minlength"))?17:-1),l(),h("disabled",o.loading),l(),d(o.loading?19:20)}},dependencies:[y,q,N,L,T,F,G,k,E],encapsulation:2})};export{D as LoginComponent};
