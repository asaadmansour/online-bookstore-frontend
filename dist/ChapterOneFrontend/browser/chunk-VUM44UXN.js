import{b as q}from"./chunk-DZG2A23L.js";import{a as P,b as n,c as A,d as F,f as L,g as k,h as M,m as T,o as D}from"./chunk-SPKWXH6Y.js";import"./chunk-HOACR73J.js";import{$ as i,I as m,Ja as S,L as b,M as w,Ra as E,Sa as R,U as p,V as f,_ as x,a as h,aa as e,ba as c,c as C,ha as _,ja as N,ma as r,oa as v}from"./chunk-VPDMBE7M.js";function I(o,a){if(o&1&&(i(0,"div",3),r(1),e()),o&2){let l=N();m(),v(" ",l.error," ")}}function V(o,a){o&1&&(i(0,"p",8),r(1,"3\u201315 letters only"),e())}function j(o,a){o&1&&(i(0,"p",8),r(1,"3\u201315 letters only"),e())}function B(o,a){o&1&&(i(0,"p",8),r(1,"Enter a valid email"),e())}function z(o,a){o&1&&(i(0,"p",8),r(1,"Minimum 8 characters"),e())}function Z(o,a){o&1&&(i(0,"p",8),r(1,"Passwords do not match"),e())}var G=class o{constructor(a,l,t){this.fb=a;this.auth=l;this.router=t;this.form=this.fb.group({firstName:["",[n.required,n.minLength(3),n.maxLength(15),n.pattern(/^[A-Za-z]+$/)]],lastName:["",[n.required,n.minLength(3),n.maxLength(15),n.pattern(/^[A-Za-z]+$/)]],email:["",[n.required,n.email]],password:["",[n.required,n.minLength(8),n.maxLength(50)]],confirmPassword:["",[n.required]],dob:[""]},{validators:this.passwordsMatch})}form;error="";loading=!1;passwordsMatch(a){let l=a.get("password")?.value,t=a.get("confirmPassword")?.value;return l===t?null:{passwordsMismatch:!0}}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.error="";let s=this.form.value,{confirmPassword:a,dob:l}=s,t=C(s,["confirmPassword","dob"]),d=h(h({},t),l?{dob:l}:{});this.auth.register(d).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/auth/verify-email"],{queryParams:{email:d.email}})},error:u=>{this.loading=!1,this.error=u?.error?.error||u?.message||"Registration failed"}})}static \u0275fac=function(l){return new(l||o)(b(T),b(q),b(E))};static \u0275cmp=w({type:o,selectors:[["app-register"]],decls:44,vars:9,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","px-4","py-12"],[1,"w-full","max-w-lg","bg-white","rounded-2xl","shadow-lg","p-8"],[1,"text-2xl","font-bold","text-center","mb-6"],[1,"mb-4","rounded-lg","bg-red-50","border","border-red-200","text-red-700","px-4","py-3","text-sm"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","firstName","name","firstName","formControlName","firstName","placeholder","John",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-blue-500","outline-none"],[1,"text-red-500","text-xs","mt-1"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","lastName","name","lastName","formControlName","lastName","placeholder","Doe",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-blue-500","outline-none"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","name","email","type","email","formControlName","email","placeholder","you@example.com",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-blue-500","outline-none"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password","name","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-blue-500","outline-none"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","confirmPassword","name","confirmPassword","type","password","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-blue-500","outline-none"],["for","dob",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"text-gray-400"],["id","dob","name","dob","type","date","formControlName","dob",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-blue-500","outline-none"],["type","submit",1,"w-full","bg-blue-600","hover:bg-blue-700","disabled:bg-blue-400","text-white","font-semibold","py-2.5","rounded-lg","transition",3,"disabled"],[1,"text-center","text-sm","text-gray-500","mt-6"],["routerLink","/auth/login",1,"text-blue-600","hover:underline","font-medium"]],template:function(l,t){if(l&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Create Account"),e(),p(4,I,2,1,"div",3),i(5,"form",4),_("ngSubmit",function(){return t.onSubmit()}),i(6,"div",5)(7,"div")(8,"label",6),r(9,"First Name"),e(),c(10,"input",7),p(11,V,2,0,"p",8),e(),i(12,"div")(13,"label",9),r(14,"Last Name"),e(),c(15,"input",10),p(16,j,2,0,"p",8),e()(),i(17,"div")(18,"label",11),r(19,"Email"),e(),c(20,"input",12),p(21,B,2,0,"p",8),e(),i(22,"div")(23,"label",13),r(24,"Password"),e(),c(25,"input",14),p(26,z,2,0,"p",8),e(),i(27,"div")(28,"label",15),r(29,"Confirm Password"),e(),c(30,"input",16),p(31,Z,2,0,"p",8),e(),i(32,"div")(33,"label",17),r(34,"Date of Birth "),i(35,"span",18),r(36,"(optional)"),e()(),c(37,"input",19),e(),i(38,"button",20),r(39),e()(),i(40,"p",21),r(41," Already have an account? "),i(42,"a",22),r(43,"Login"),e()()()()),l&2){let d,s,u,g,y;m(4),f(t.error?4:-1),m(),x("formGroup",t.form),m(6),f((d=t.form.get("firstName"))!=null&&d.touched&&((d=t.form.get("firstName"))!=null&&d.invalid)?11:-1),m(5),f((s=t.form.get("lastName"))!=null&&s.touched&&((s=t.form.get("lastName"))!=null&&s.invalid)?16:-1),m(5),f((u=t.form.get("email"))!=null&&u.touched&&((u=t.form.get("email"))!=null&&u.invalid)?21:-1),m(5),f((g=t.form.get("password"))!=null&&g.touched&&((g=t.form.get("password"))!=null&&g.hasError("minlength"))?26:-1),m(5),f((y=t.form.get("confirmPassword"))!=null&&y.touched&&t.form.hasError("passwordsMismatch")?31:-1),m(7),x("disabled",t.loading),m(),v(" ",t.loading?"Creating account\u2026":"Register"," ")}},dependencies:[S,D,L,P,A,F,M,k,R],encapsulation:2})};export{G as RegisterComponent};
