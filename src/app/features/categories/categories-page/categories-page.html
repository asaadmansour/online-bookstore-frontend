
<div class="max-w-6xl mx-auto px-6 py-10">

  
  <div class="mb-10 text-center">
    <p class="text-accent text-sm font-semibold tracking-widest uppercase mb-1">Explore the Collection</p>
    <h1 class="text-4xl font-bold text-text-main">Browse by Category</h1>
    <p class="mt-3 text-text-muted max-w-xl mx-auto">
      Discover your next favorite read through our curated collections, ranging from timeless classics to modern scientific breakthroughs.
    </p>
  </div>

  
  @if (loading) {
    <div class="flex flex-col items-center justify-center p-12">
      <p-progressSpinner strokeWidth="4" styleClass="w-12 h-12 text-accent"></p-progressSpinner>
      <p class="mt-4 text-sm text-text-muted font-medium">Loading categories...</p>
    </div>
  }

  
  @if (!loading && error) {
    <div class="text-center py-12 text-text-muted">{{ error }}</div>
  }

  
  @if (!loading && !error && categories.length > 0) {
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
      @for (c of categories; track c._id) {
        <div class="bg-white rounded-2xl border border-border-light shadow-sm hover:shadow-md transition-shadow overflow-hidden group">

          
          <div class="relative w-full aspect-[5/4] overflow-hidden bg-bg-soft">
            <img
              [ngSrc]="c.categoryImage || 'images/category-placeholder.jpg'"
              fill
              [alt]="c.name"
              class="object-cover transition-transform duration-300 group-hover:scale-105"
              (error)="$any($event.target).src = 'images/category-placeholder.jpg'"
            />
          </div>

          
          <div class="p-4">
            <h3 class="font-bold text-text-main text-base mb-1">{{ c.name }}</h3>
            <p class="text-text-muted text-sm line-clamp-2 mb-4">
              Explore books in <strong>{{ c.name }}</strong> and discover your next favorite read.
            </p>
            <button
              type="button"
              class="w-full py-2 rounded-lg bg-accent/10 text-accent font-semibold text-sm hover:bg-accent hover:text-white transition-colors cursor-pointer"
              (click)="goToCategory(c._id)"
            >
              Explore Category
            </button>
          </div>
        </div>
      }
    </div>
  }

  
  @if (!loading && !error && categories.length === 0) {
    <div class="text-center py-12 text-text-muted">No categories yet.</div>
  }

  
  @if (!loading && !error && totalPages > 1) {
    <div class="flex items-center justify-center gap-3 mt-10">
      <button
        type="button"
        (click)="prevPage()"
        [disabled]="page <= 1"
        class="px-4 py-2 rounded-lg border border-border-light text-sm font-medium text-text-main bg-white hover:bg-bg-soft transition-colors disabled:opacity-40 disabled:cursor-not-allowed"
      >
        ← Prev
      </button>
      <span class="text-sm text-text-muted">Page <strong>{{ page }}</strong> of <strong>{{ totalPages }}</strong></span>
      <button
        type="button"
        (click)="nextPage()"
        [disabled]="page >= totalPages"
        class="px-4 py-2 rounded-lg border border-border-light text-sm font-medium text-text-main bg-white hover:bg-bg-soft transition-colors disabled:opacity-40 disabled:cursor-not-allowed"
      >
        Next →
      </button>
    </div>
  }

</div>