


<div class="bg-bg-soft border border-border-light rounded p-4 mb-4 flex gap-3">
  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-accent mt-1 shrink-0" fill="none" viewBox="0 0 24 24"
    stroke="currentColor" stroke-width="2">
    <path stroke-linecap="round" stroke-linejoin="round"
      d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
  </svg>
  <div>
    <p class="font-semibold text-sm mb-1">Password Requirements</p>
    <ul class="text-sm text-text-muted mb-0 ml-4 list-disc">
      <li>Minimum 8 characters</li>
      <li>Mix of letters, numbers, and symbols recommended</li>
    </ul>
  </div>
</div>

<form [formGroup]="form" (ngSubmit)="onSubmit()" class="max-w-md">

  
  <div class="mb-3">
    <label class="text-xs text-text-muted">CURRENT PASSWORD</label>
    <div class="flex items-stretch border border-border-light rounded overflow-hidden hover:border-accent/60 transition-colors">
      <div class="px-3 flex items-center bg-white text-text-muted">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
        </svg>
      </div>
      <input [type]="showCurrentPassword ? 'text' : 'password'" class="flex-1 px-3 py-2"
        formControlName="currentPassword" placeholder="Enter current password"
        [class.border-red-500]="form.get('currentPassword')?.touched && form.get('currentPassword')?.hasError('required')">
      <button type="button" class="px-3 bg-white" (click)="toggleVisibility('current')">
        @if (showCurrentPassword) {
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-text-muted" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88" />
        </svg>
        } @else {
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-text-muted" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        }
      </button>
    </div>
    @if (form.get('currentPassword')?.touched && form.get('currentPassword')?.hasError('required')) {
    <small class="text-red-600">Current password is required</small>
    }
  </div>

  
  <div class="mb-3">
    <label class="text-xs text-text-muted">NEW PASSWORD</label>
    <div class="flex items-stretch border border-border-light rounded overflow-hidden hover:border-accent/60 transition-colors">
      <div class="px-3 flex items-center bg-white text-text-muted">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z" />
        </svg>
      </div>
      <input [type]="showNewPassword ? 'text' : 'password'" class="flex-1 px-3 py-2" formControlName="newPassword"
        placeholder="Enter new password"
        [class.border-red-500]="form.get('newPassword')?.touched && form.get('newPassword')?.invalid">
      <button type="button" class="px-3 bg-white" (click)="toggleVisibility('new')">
        @if (showNewPassword) {
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-text-muted" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88" />
        </svg>
        } @else {
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-text-muted" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        }
      </button>
    </div>
    @if (form.get('newPassword')?.touched && form.get('newPassword')?.hasError('required')) {
    <small class="text-red-600">New password is required</small>
    }
    @if (form.get('newPassword')?.touched && form.get('newPassword')?.hasError('minlength')) {
    <small class="text-red-600">Minimum 8 characters</small>
    }

    
    @if (form.get('newPassword')?.value) {
    <div class="mt-2">
      <div class="w-full bg-border-light rounded h-1 overflow-hidden">
        <div class="h-1"
          [style.width]="passwordStrength.label === 'Weak' ? '33%' : passwordStrength.label === 'Medium' ? '66%' : '100%'"
          [class.bg-red-500]="passwordStrength.label === 'Weak'"
          [class.bg-yellow-400]="passwordStrength.label === 'Medium'"
          [class.bg-green-500]="passwordStrength.label === 'Strong'"></div>
      </div>
      <small
        [class]="passwordStrength.label === 'Weak' ? 'text-red-600' : passwordStrength.label === 'Medium' ? 'text-yellow-600' : 'text-green-600'">{{
        passwordStrength.label }}</small>
    </div>
    }
  </div>

  
  <div class="mb-4">
    <label class="text-xs text-text-muted">CONFIRM NEW PASSWORD</label>
    <div class="flex items-stretch border border-border-light rounded overflow-hidden hover:border-accent/60 transition-colors">
      <div class="px-3 flex items-center bg-white text-text-muted">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z" />
        </svg>
      </div>
      <input [type]="showConfirmPassword ? 'text' : 'password'" class="flex-1 px-3 py-2"
        formControlName="confirmPassword" placeholder="Re-enter new password"
        [class.border-red-500]="form.get('confirmPassword')?.touched && form.hasError('passwordsMismatch')">
      <button type="button" class="px-3 bg-white" (click)="toggleVisibility('confirm')">
        @if (showConfirmPassword) {
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-text-muted" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88" />
        </svg>
        } @else {
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-text-muted" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        }
      </button>
    </div>
    @if (form.get('confirmPassword')?.touched && form.hasError('passwordsMismatch')) {
    <small class="text-red-600">Passwords do not match</small>
    }
  </div>

  <div class="border-t my-4"></div>

  <button type="submit" class="px-4 py-2 bg-accent hover:bg-accent-hover text-white rounded inline-flex items-center gap-2 transition-colors"
    [disabled]="loading || form.invalid">
    @if (loading) {
    <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
      viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
    </svg>Changingâ€¦
    } @else {
    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"
      stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
    </svg>
    Change Password
    }
  </button>
</form>