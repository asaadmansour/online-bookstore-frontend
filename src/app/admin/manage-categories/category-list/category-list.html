<!-- Loading -->
<div *ngIf="loading" class="state-box">
    <div class="spinner"></div>
    <span>Loading categoriesâ€¦</span>
</div>

<!-- Error -->
<div *ngIf="!loading && error" class="state-box error-box">
    <span>âš  {{ error }}</span>
    <button class="btn-retry" (click)="load()">Retry</button>
</div>

<!-- Empty -->
<div *ngIf="!loading && !error && categories.length === 0" class="state-box">
    <span>No categories yet. Add your first one!</span>
</div>

<!-- Table -->
<table *ngIf="!loading && !error && categories.length > 0" class="tbl">
    <thead>
        <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Created</th>
            <th class="col-actions">Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let cat of categories">
            <td class="col-name">{{ cat.name }}</td>
            <td class="col-desc">{{ cat.description || 'â€”' }}</td>
            <td class="col-date">{{ formatDate(cat.createdAt) }}</td>
            <td class="col-actions">
                <a class="btn-edit" [routerLink]="[cat._id, 'edit']">Edit</a>
                <button class="btn-delete" (click)="openDelete(cat)">Delete</button>
            </td>
        </tr>
    </tbody>
</table>

<!-- Delete Confirm Modal -->
<div class="modal-backdrop" *ngIf="pendingDeleteId" (click)="cancelDelete()">
    <div class="modal" (click)="$event.stopPropagation()">
        <div class="modal-icon">ðŸ—‘</div>
        <h3 class="modal-title">Delete Category</h3>
        <p class="modal-msg">Are you sure you want to delete <strong>{{ pendingDeleteName }}</strong>? This action
            cannot be undone.</p>
        <div class="modal-actions">
            <button class="btn-cancel" [disabled]="deleting" (click)="cancelDelete()">Cancel</button>
            <button class="btn-confirm-delete" [disabled]="deleting" (click)="confirmDelete()">
                {{ deleting ? 'Deletingâ€¦' : 'Yes, Delete' }}
            </button>
        </div>
    </div>
</div>