<!-- Absolutely-positioned dropdown â€” only shows when there are suggestions -->
@if (suggestions().length > 0) {
  <div class="absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-xl shadow-lg z-50 overflow-hidden py-1">

    <!-- First row: search for exactly what was typed -->
    <button
      type="button"
      (click)="setBook(rawQuery())"
      class="w-full flex items-center gap-3 px-4 py-2.5 text-left hover:bg-bg-soft transition-colors group border-b border-slate-100"
    >
      <svg class="w-3.5 h-3.5 text-accent shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
        fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
      </svg>
      <span class="text-sm text-text-main flex-1 truncate">
        Search for "<strong>{{ rawQuery() }}</strong>"
      </span>
    </button>

    <!-- Book suggestions -->
    @for (suggestion of suggestions(); track suggestion._id) {
      <button
        type="button"
        class="w-full flex items-center gap-3 px-4 py-2.5 text-left hover:bg-bg-soft transition-colors group"
      >
        <svg
          class="w-3.5 h-3.5 text-text-muted shrink-0"
          xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round"
        >
          <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
        </svg>
        <button type="button" (click)="setBook(suggestion.name)" class="text-sm text-text-main truncate flex-1 text-left bg-transparent border-0 cursor-pointer p-0">
          {{ suggestion.name }}
        </button>
        <svg
          class="w-3.5 h-3.5 text-text-muted opacity-0 group-hover:opacity-100 -rotate-45 transition-opacity shrink-0"
          xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round"
        >
          <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
        </svg>
      </button>
    }
  </div>
}
